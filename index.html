<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MissÃ£o Idiomas ğŸŒ</title>

<style>
*{box-sizing:border-box}
html,body{
  margin:0;width:100%;height:100%;
  font-family:Arial,Helvetica,sans-serif;
  background:#f2f2f2
}
header{
  background:#0b1f3a;
  color:white;
  text-align:center;
  padding:22px;
  font-size:26px;
  font-weight:bold
}
#app{
  height:calc(100% - 80px);
  display:flex;
  justify-content:center;
  align-items:center;
  padding:12px
}
.card{
  width:100%;
  height:100%;
  max-width:520px;
  max-height:760px;
  background:white;
  border-radius:26px;
  padding:22px;
  box-shadow:0 15px 40px rgba(0,0,0,.2);
  display:flex;
  flex-direction:column;
  justify-content:space-between
}
#question{
  font-size:30px;
  font-weight:bold;
  margin:20px 0;
  text-align:center
}
.option{
  width:100%;
  padding:18px;
  margin-bottom:12px;
  font-size:22px;
  border-radius:18px;
  border:none;
  background:#2196f3;
  color:white;
  transition:.3s
}
.correct{background:#4caf50!important;transform:scale(1.03)}
.wrong{background:#f44336!important}
#listen{
  background:#ff5252;
  color:white;
  font-size:20px;
  padding:14px;
  border-radius:18px;
  border:none
}
#scoreBox{
  font-size:20px;
  text-align:center;
  margin-top:10px
}
.big{
  width:100%;
  padding:22px;
  font-size:26px;
  border-radius:20px;
  border:none;
  font-weight:bold;
  margin-top:18px
}
.en{background:#1e90ff;color:white}
.fr{background:#0b1f3a;color:white}
#start,#nextLevel{
  width:100%;
  height:100%;
  border-radius:26px;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center
}
#start{
  background:linear-gradient(135deg,#002654,#fff,#ed2939);
  animation:fade 1.2s
}
@keyframes fade{from{opacity:0}to{opacity:1}}
.confetti{
  position:fixed;
  width:10px;
  height:10px;
  animation:fall 3s linear forwards
}
@keyframes fall{
  to{transform:translateY(100vh) rotate(360deg);opacity:0}
}
</style>
</head>

<body>

<header>MissÃ£o Idiomas ğŸŒ</header>

<div id="app">

<div id="start">
  <h1 style="font-size:40px">ğŸ® MissÃ£o Idiomas</h1>
  <button class="big en" onclick="selectLang('en')">ğŸ‡¬ğŸ‡§ Jogar e aprender InglÃªs</button>
  <button class="big fr" onclick="selectLang('fr')">ğŸ‡«ğŸ‡· Jogar e aprender FrancÃªs</button>
</div>

<div id="game" style="display:none;width:100%;height:100%">
  <div class="card">
    <button id="listen" onclick="speak()">ğŸ”Š Ouvir pronÃºncia</button>
    <div id="question"></div>

    <button class="option" id="a0" onclick="answer(0)"></button>
    <button class="option" id="a1" onclick="answer(1)"></button>
    <button class="option" id="a2" onclick="answer(2)"></button>

    <div id="scoreBox">
      Acertos: <span id="score">0</span>/25
      <div id="achieve"></div>
    </div>
  </div>
</div>

<div id="nextLevel" style="display:none">
  <h1>ğŸ‰ ParabÃ©ns!</h1>
  <p id="nextMsg"></p>
  <button class="big fr" onclick="startLevel2()">Iniciar NÃ­vel 2</button>
</div>

</div>

<script>
const sounds={
  ok:new Audio("https://actions.google.com/sounds/v1/cartoon/pop.ogg"),
  err:new Audio("https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg")
};

let lang="",level=1,current=0,score=0,questions=[],correctIndex=0;

const data={
fr:{
voice:"fr-FR",
l1:[
{q:"Bonjour",a:["OlÃ¡","Obrigado","Tchau"],c:0},
{q:"Merci",a:["Obrigado","Por favor","Desculpa"],c:0},
{q:"Au revoir",a:["AtÃ© logo","Bom dia","Boa noite"],c:0},
{q:"Je suis perdu",a:["Estou perdido","Estou cansado","Estou bem"],c:0},
{q:"OÃ¹ est la salle de bain ?",a:["Onde fica o banheiro?","Onde Ã© o hotel?","Quanto custa?"],c:0},
// (restante atÃ© 25 pode ser expandido depois)
],
l2:[
{q:"Je voudrais rÃ©server une chambre",a:["Gostaria de reservar um quarto","Quero Ã¡gua","Estou perdido"],c:0}
]
},
en:{
voice:"en-US",
l1:[
{q:"Hello",a:["OlÃ¡","Obrigado","Tchau"],c:0},
{q:"Thank you",a:["Obrigado","Por favor","Desculpa"],c:0},
{q:"Goodbye",a:["AtÃ© logo","Bom dia","Boa noite"],c:0},
{q:"I am lost",a:["Estou perdido","Estou cansado","Estou bem"],c:0},
{q:"Where is the bathroom?",a:["Onde fica o banheiro?","Onde Ã© o hotel?","Quanto custa?"],c:0}
],
l2:[
{q:"I would like to book a room",a:["Gostaria de reservar um quarto","Quero Ã¡gua","Estou perdido"],c:0}
]
}
};

function selectLang(l){
  lang=l;level=1;current=0;score=0;
  questions=data[lang].l1;
  document.getElementById("start").style.display="none";
  document.getElementById("game").style.display="block";
  load();
}

function load(){
  const q=questions[current];
  document.getElementById("question").innerText=q.q;
  const opts=[...q.a.map((t,i)=>({t,i}))].sort(()=>Math.random()-0.5);
  correctIndex=opts.findIndex(o=>o.i===q.c);
  opts.forEach((o,i)=>{
    const b=document.getElementById("a"+i);
    b.innerText=o.t;
    b.className="option";
  });
  document.getElementById("score").innerText=score;
}

function answer(i){
  const ok=i===correctIndex;
  sounds[ok?"ok":"err"].play();
  if(navigator.vibrate) navigator.vibrate(ok?100:300);
  document.getElementById("a"+i).classList.add(ok?"correct":"wrong");
  if(ok) score++;
  setTimeout(()=>{
    current++;
    current<questions.length?load():finish();
  },600);
}

function finish(){
  document.getElementById("game").style.display="none";
  document.getElementById("nextLevel").style.display="flex";
  document.getElementById("nextMsg").innerText=
    score>=15?"VocÃª desbloqueou o nÃ­vel 2!":"VocÃª precisa de 15 acertos para avanÃ§ar";
  if(score>=15) confetti();
}

function startLevel2(){
  level=2;current=0;score=0;
  questions=data[lang].l2;
  document.getElementById("nextLevel").style.display="none";
  document.getElementById("game").style.display="block";
  load();
}

function speak(){
  const u=new SpeechSynthesisUtterance(questions[current].q);
  u.lang=data[lang].voice;
  speechSynthesis.speak(u);
}

function confetti(){
  for(let i=0;i<80;i++){
    const c=document.createElement("div");
    c.className="confetti";
    c.style.left=Math.random()*100+"%";
    c.style.background=`hsl(${Math.random()*360},100%,50%)`;
    document.body.appendChild(c);
    setTimeout(()=>c.remove(),3000);
  }
}
</script>

</body>
</html>
