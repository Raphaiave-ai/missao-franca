<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MissÃ£o FranÃ§a ğŸ‡«ğŸ‡·</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
}

body {
  display: flex;
  justify-content: center;
  align-items: center;
  background: linear-gradient(135deg, #0055A4, #ffffff, #EF4135);
  font-family: Arial, sans-serif;
}

.game-container {
  background: white;
  width: 90%;
  max-width: 420px;
  padding: 20px;
  border-radius: 16px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
  text-align: center;
}

button {
  width: 100%;
  padding: 14px;
  margin: 8px 0;
  font-size: 16px;
  border: none;
  border-radius: 10px;
  background: #0055A4;
  color: white;
  cursor: pointer;
}

.listen {
  background: #EF4135;
}

.info {
  margin-top: 8px;
  font-weight: bold;
}
</style>
</head>

<body>

<div class="game-container">
  <h2>ğŸ® MissÃ£o FranÃ§a ğŸ‡«ğŸ‡·</h2>

  <p id="pergunta"></p>

  <button class="listen" onclick="ouvirPronuncia()">ğŸ”Š Ouvir pronÃºncia</button>

  <button onclick="responder(0)" id="btn0"></button>
  <button onclick="responder(1)" id="btn1"></button>
  <button onclick="responder(2)" id="btn2"></button>

  <div class="info" id="xp"></div>
  <div class="info" id="nivel"></div>
</div>

<script>
const perguntas = [
  { pergunta: 'AlguÃ©m diz: "Bonjour"', respostas: ['Bonjour', 'Merci', 'Au revoir'], correta: 0, fala: 'Bonjour' },
  { pergunta: 'AlguÃ©m diz: "Merci"', respostas: ['Bonsoir', 'Merci', 'De rien'], correta: 2, fala: 'De rien' },
  { pergunta: 'Como dizer "Boa noite"?', respostas: ['Bonjour', 'Bonsoir', 'Merci'], correta: 1, fala: 'Bonsoir' },
  { pergunta: 'Como dizer "Tchau"?', respostas: ['Au revoir', 'Merci', 'Bonjour'], correta: 0, fala: 'Au revoir' },
  { pergunta: 'Como dizer "AtÃ© logo"?', respostas: ['Ã€ bientÃ´t', 'Bonsoir', 'Pardon'], correta: 0, fala: 'Ã€ bientÃ´t' },
  { pergunta: 'Como dizer "Por favor"?', respostas: ['Merci', 'Sâ€™il vous plaÃ®t', 'Bonjour'], correta: 1, fala: 'Sâ€™il vous plaÃ®t' },
  { pergunta: 'Como dizer "Desculpa"?', respostas: ['Pardon', 'Merci', 'Bonsoir'], correta: 0, fala: 'Pardon' },
  { pergunta: 'Como dizer "Sim"?', respostas: ['Non', 'Oui', 'Merci'], correta: 1, fala: 'Oui' },
  { pergunta: 'Como dizer "NÃ£o"?', respostas: ['Oui', 'Bonsoir', 'Non'], correta: 2, fala: 'Non' },
  { pergunta: 'Como dizer "Tudo bem?"', respostas: ['Ã‡a va ?', 'Merci', 'Bonjour'], correta: 0, fala: 'Ã‡a va ?' },
  { pergunta: 'Resposta para "Ã‡a va ?"', respostas: ['Ã‡a va bien', 'Au revoir', 'Pardon'], correta: 0, fala: 'Ã‡a va bien' },
  { pergunta: 'Como agradecer formalmente?', respostas: ['Salut', 'Merci beaucoup', 'Bonsoir'], correta: 1, fala: 'Merci beaucoup' },
  { pergunta: 'Como dizer "Com licenÃ§a"?', respostas: ['Excusez-moi', 'Bonjour', 'Merci'], correta: 0, fala: 'Excusez-moi' }
];

let estado = JSON.parse(localStorage.getItem("missaoFranca")) || {
  xp: 0,
  nivel: 1,
  perguntaAtual: 0
};

let vozFeminina = null;

function carregarVoz() {
  const vozes = speechSynthesis.getVoices();
  vozFeminina = vozes.find(v => v.lang === 'fr-FR' && v.name.toLowerCase().includes('female'))
             || vozes.find(v => v.lang === 'fr-FR');
}

speechSynthesis.onvoiceschanged = carregarVoz;

function ouvirPronuncia() {
  const texto = perguntas[estado.perguntaAtual].fala;
  const fala = new SpeechSynthesisUtterance(texto);
  fala.lang = 'fr-FR';
  fala.rate = 0.9;
  if (vozFeminina) fala.voice = vozFeminina;
  speechSynthesis.speak(fala);
}

function carregarPergunta() {
  const p = perguntas[estado.perguntaAtual];
  document.getElementById("pergunta").innerText = p.pergunta;
  document.getElementById("btn0").innerText = p.respostas[0];
  document.getElementById("btn1").innerText = p.respostas[1];
  document.getElementById("btn2").innerText = p.respostas[2];
  document.getElementById("xp").innerText = "XP: " + estado.xp;
  document.getElementById("nivel").innerText = "NÃ­vel: " + estado.nivel;
}

function responder(opcao) {
  const p = perguntas[estado.perguntaAtual];
  ouvirPronuncia();

  if (opcao === p.correta) {
    estado.xp += 10;
    if (estado.xp % 30 === 0) {
      estado.nivel++;
      alert("ğŸ‰ Subiu de nÃ­vel!");
    }
    estado.perguntaAtual = (estado.perguntaAtual + 1) % perguntas.length;
  } else {
    alert("âŒ Resposta errada");
  }

  localStorage.setItem("missaoFranca", JSON.stringify(estado));
  carregarPergunta();
}

carregarPergunta();
</script>

</body>
</html>
