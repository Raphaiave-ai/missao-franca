<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MissÃ£o Idiomas ğŸŒ</title>

<style>
*{box-sizing:border-box}
html,body{margin:0;width:100%;height:100%;font-family:Arial;background:#f2f2f2}
header{background:#0b1f3a;color:white;text-align:center;padding:22px;font-size:26px;font-weight:bold}
#app{height:calc(100% - 80px);display:flex;justify-content:center;align-items:center;padding:12px}

.card{
  width:100%;height:100%;max-height:720px;
  background:white;border-radius:24px;padding:22px;
  box-shadow:0 15px 40px rgba(0,0,0,.2);
  display:flex;flex-direction:column;justify-content:space-between;
  animation:fade .4s
}
@keyframes fade{from{opacity:0}to{opacity:1}}

#question{font-size:30px;font-weight:bold;margin:18px 0}
.option{width:100%;padding:20px;margin-bottom:12px;font-size:22px;border-radius:18px;border:none;background:#2196f3;color:white}
.option:active{transform:scale(.95)}
.correct{background:#4caf50!important}
.wrong{background:#f44336!important}

#listen{background:#ff5252;color:white;font-size:22px;padding:16px;border-radius:18px;border:none}

#scoreBox{font-size:20px;text-align:center}
#achievement{margin-top:8px;font-size:22px;font-weight:bold;color:#4caf50}

.big{width:100%;padding:22px;font-size:26px;border-radius:20px;border:none;font-weight:bold;margin-top:18px}
.en{background:#1e90ff;color:white}
.fr{background:#0b1f3a;color:white}

#start,#nextLevel{
  width:100%;height:100%;border-radius:24px;
  display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center
}
#start{background:linear-gradient(135deg,#002654,#fff,#ed2939)}
</style>
</head>

<body>

<header>MissÃ£o Idiomas ğŸŒ</header>

<div id="app">

<div id="start">
  <h1>ğŸ® Escolha o idioma</h1>
  <button class="big en" onclick="selectLang('en')">ğŸ‡¬ğŸ‡§ Aprender InglÃªs</button>
  <button class="big fr" onclick="selectLang('fr')">ğŸ‡«ğŸ‡· Aprender FrancÃªs</button>
</div>

<div id="game" style="display:none;width:100%;height:100%">
  <div class="card">
    <button id="listen" onclick="speak()">ğŸ”Š Ouvir pronÃºncia</button>
    <div id="question"></div>
    <div>
      <button class="option" id="a0" onclick="answer(0)"></button>
      <button class="option" id="a1" onclick="answer(1)"></button>
      <button class="option" id="a2" onclick="answer(2)"></button>
    </div>
    <div id="scoreBox">
      Acertos: <span id="score">0</span>
      <div id="achievement"></div>
    </div>
  </div>
</div>

<div id="nextLevel" style="display:none">
  <h1>ğŸ‰ ParabÃ©ns!</h1>
  <p>VocÃª concluiu este nÃ­vel</p>
  <button class="big fr" onclick="startNextLevel()">Iniciar prÃ³ximo nÃ­vel</button>
</div>

</div>

<script>
let lang="fr";
let level=1;
let current=0;
let score=0;
let questions=[];

const content={
fr:{
l1:[
{q:"Bonjour",a:["OlÃ¡","Tchau","Obrigado"],c:0},
{q:"Merci",a:["Obrigado","Por favor","Oi"],c:0},
{q:"Au revoir",a:["AtÃ© logo","Boa noite","OlÃ¡"],c:0}
],
l2:[
{q:"Je voudrais rÃ©server une chambre",a:["Quero reservar um quarto","Quero sair","Quero comer"],c:0}
],
voice:"fr-FR"
},
en:{
l1:[
{q:"Hello",a:["OlÃ¡","Tchau","Obrigado"],c:0},
{q:"Thank you",a:["Obrigado","Por favor","Oi"],c:0},
{q:"Goodbye",a:["AtÃ© logo","Boa noite","OlÃ¡"],c:0}
],
l2:[
{q:"I would like to book a room",a:["Quero reservar um quarto","Quero sair","Quero comer"],c:0}
],
voice:"en-US"
}
};

function save(){
  localStorage.setItem("progress_"+lang,JSON.stringify({level,current,score}));
}

function loadSave(){
  const d=JSON.parse(localStorage.getItem("progress_"+lang));
  if(d){level=d.level;current=d.current;score=d.score}
}

function selectLang(l){
  lang=l;
  loadSave();
  questions=content[lang]["l"+level];
  document.getElementById("start").style.display="none";
  document.getElementById("game").style.display="block";
  load();
}

function load(){
  const q=questions[current];
  document.getElementById("question").innerText=q.q;
  q.a.forEach((t,i)=>{document.getElementById("a"+i).innerText=t});
  document.getElementById("score").innerText=score;
  checkAchievement();
}

function answer(i){
  const q=questions[current];
  if(i===q.c){score++}
  current++;
  save();
  if(current<questions.length){load()}
  else{
    if(level===1){
      document.getElementById("game").style.display="none";
      document.getElementById("nextLevel").style.display="flex";
    }else{
      alert("ğŸ† Curso concluÃ­do!");
      localStorage.removeItem("progress_"+lang);
      location.reload();
    }
  }
}

function startNextLevel(){
  level=2;current=0;score=0;
  questions=content[lang].l2;
  save();
  document.getElementById("nextLevel").style.display="none";
  document.getElementById("game").style.display="block";
  load();
}

function checkAchievement(){
  const a=document.getElementById("achievement");
  if(score>=25)a.innerText="ğŸ¥‡ Mestre";
  else if(score>=20)a.innerText="ğŸ¥ˆ Explorador";
  else if(score>=10)a.innerText="ğŸ¥‰ Iniciante";
  else a.innerText="";
}

function speak(){
  const u=new SpeechSynthesisUtterance(questions[current].q);
  u.lang=content[lang].voice;
  u.rate=.9;
  speechSynthesis.speak(u);
}
</script>

</body>
</html>
