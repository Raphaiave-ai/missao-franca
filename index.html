<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MissÃ£o FranÃ§a ğŸ‡«ğŸ‡·</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f2f7ff;
}

.app {
  max-width: 420px;
  margin: auto;
  min-height: 100vh;
  background: white;
  display: flex;
  flex-direction: column;
}

header {
  background: #58cc02;
  color: white;
  padding: 15px;
  text-align: center;
  font-size: 20px;
  font-weight: bold;
}

.card {
  margin: 20px;
  padding: 20px;
  border-radius: 16px;
  background: #ffffff;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  text-align: center;
}

button {
  width: 100%;
  padding: 14px;
  margin-top: 10px;
  border: none;
  border-radius: 12px;
  font-size: 16px;
  background: #1cb0f6;
  color: white;
}

.listen {
  background: #ff4b4b;
}

.nav {
  display: flex;
  justify-content: space-around;
  border-top: 1px solid #ddd;
  padding: 10px 0;
}

.nav button {
  width: auto;
  background: none;
  color: #555;
  font-size: 14px;
}
</style>
</head>

<body>

<div class="app">

<header>MissÃ£o FranÃ§a ğŸ‡«ğŸ‡·</header>

<div id="tela-jogo" class="card">
  <h3 id="frase"></h3>
  <button class="listen" onclick="ouvir()">ğŸ”Š Ouvir</button>
  <button onclick="responder(0)" id="b0"></button>
  <button onclick="responder(1)" id="b1"></button>
  <button onclick="responder(2)" id="b2"></button>
  <p id="status"></p>
</div>

<div id="tela-conquistas" class="card" style="display:none">
  <h3>ğŸ† Conquistas</h3>
  <ul id="lista"></ul>
</div>

<div class="nav">
  <button onclick="mostrar('jogo')">ğŸ® Jogo</button>
  <button onclick="mostrar('conquistas')">ğŸ† Conquistas</button>
</div>

</div>

<script>
const frases = [
"Bonjour","Merci","Au revoir","S'il vous plaÃ®t","Pardon",
"Je voudrais un cafÃ©","L'addition, s'il vous plaÃ®t","OÃ¹ sont les toilettes ?",
"Combien Ã§a coÃ»te ?","Je ne comprends pas","Parlez-vous portugais ?",
"Je cherche un hÃ´tel","Ã€ quelle heure ouvre ?","C'est bon","TrÃ¨s bien",
"Excusez-moi","Pouvez-vous m'aider ?","Je suis perdu",
"OÃ¹ est le mÃ©tro ?","Une table pour deux","J'ai une rÃ©servation",
"Je voudrais payer","C'est dÃ©licieux","Ã€ bientÃ´t",
"Bonne journÃ©e","Bonsoir","Bonne nuit","Je m'appelleâ€¦",
"EnchantÃ©","D'accord"
];

let estado = JSON.parse(localStorage.getItem("mf3")) || {
  i: 0,
  xp: 0,
  nivel: 1,
  conquistas: []
};

let voz = null;
speechSynthesis.onvoiceschanged = () => {
  voz = speechSynthesis.getVoices().find(v => v.lang === 'fr-FR');
};

function ouvir() {
  const u = new SpeechSynthesisUtterance(frases[estado.i]);
  u.lang = 'fr-FR';
  u.rate = 0.9;
  if (voz) u.voice = voz;
  speechSynthesis.speak(u);
}

function carregar() {
  frase.innerText = frases[estado.i];
  const correta = frases[estado.i];
  const op = embaralhar([correta, frases[Math.floor(Math.random()*frases.length)], frases[Math.floor(Math.random()*frases.length)]]);
  b0.innerText = op[0];
  b1.innerText = op[1];
  b2.innerText = op[2];
  status.innerText = `XP: ${estado.xp} | NÃ­vel: ${estado.nivel}`;
}

function responder(n) {
  if ([b0,b1,b2][n].innerText === frases[estado.i]) {
    estado.xp += 10;
    if (estado.xp % 50 === 0) {
      estado.conquistas.push("ğŸ”¥ " + estado.xp + " XP alcanÃ§ados");
    }
    if (estado.xp % 40 === 0) estado.nivel++;
    estado.i = (estado.i + 1) % frases.length;
  } else {
    alert("âŒ Errado");
  }
  salvar();
  carregar();
}

function salvar() {
  localStorage.setItem("mf3", JSON.stringify(estado));
}

function mostrar(t) {
  tela-jogo.style.display = t === 'jogo' ? 'block' : 'none';
  tela-conquistas.style.display = t === 'conquistas' ? 'block' : 'none';
  if (t === 'conquistas') {
    lista.innerHTML = estado.conquistas.map(c => `<li>${c}</li>`).join("");
  }
}

function embaralhar(a) {
  return a.sort(() => Math.random() - 0.5);
}

carregar();
</script>

</body>
</html>
