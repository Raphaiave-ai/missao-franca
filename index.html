<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MissÃ£o Idiomas ğŸŒ</title>

<style>
*{box-sizing:border-box}
html,body{margin:0;width:100%;height:100%;font-family:Arial;background:#f2f2f2}
header{background:#0b1f3a;color:white;text-align:center;padding:22px;font-size:26px;font-weight:bold}

#app{
  height:calc(100% - 80px);
  display:flex;
  justify-content:center;
  align-items:center;
  padding:12px
}

.card{
  width:100%;
  height:100%;
  max-height:720px;
  background:white;
  border-radius:24px;
  padding:22px;
  box-shadow:0 15px 40px rgba(0,0,0,.2);
  display:flex;
  flex-direction:column;
  justify-content:space-between;
}

#question{font-size:30px;font-weight:bold;margin:18px 0}
.option{
  width:100%;
  padding:20px;
  margin-bottom:12px;
  font-size:22px;
  border-radius:18px;
  border:none;
  background:#2196f3;
  color:white;
}
.correct{background:#4caf50!important}
.wrong{background:#f44336!important}

#listen{background:#ff5252;color:white;font-size:22px;padding:16px;border-radius:18px;border:none}
#scoreBox{font-size:20px;text-align:center}
#achievement{font-size:22px;font-weight:bold;color:#4caf50;margin-top:8px}

.big{width:100%;padding:22px;font-size:26px;border-radius:20px;border:none;font-weight:bold;margin-top:18px}
.en{background:#1e90ff;color:white}
.fr{background:#0b1f3a;color:white}

#start,#nextLevel{
  width:100%;height:100%;border-radius:24px;
  display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center
}
#start{background:linear-gradient(135deg,#002654,#fff,#ed2939)}

.confetti{
  position:fixed;
  width:10px;
  height:10px;
  animation:fall 3s linear forwards;
}
@keyframes fall{
  to{transform:translateY(100vh) rotate(360deg);opacity:0}
}
</style>
</head>

<body>

<header>MissÃ£o Idiomas ğŸŒ</header>

<div id="app">

<div id="start">
  <h1>ğŸ® Escolha o idioma</h1>
  <button class="big en" onclick="selectLang('en')">ğŸ‡¬ğŸ‡§ Aprender InglÃªs</button>
  <button class="big fr" onclick="selectLang('fr')">ğŸ‡«ğŸ‡· Aprender FrancÃªs</button>
</div>

<div id="game" style="display:none;width:100%;height:100%">
  <div class="card">
    <button id="listen" onclick="speak()">ğŸ”Š Ouvir pronÃºncia</button>
    <div id="question"></div>

    <div>
      <button class="option" id="a0" onclick="answer(0)"></button>
      <button class="option" id="a1" onclick="answer(1)"></button>
      <button class="option" id="a2" onclick="answer(2)"></button>
    </div>

    <div id="scoreBox">
      Acertos: <span id="score">0</span>/25
      <div id="achievement"></div>
    </div>
  </div>
</div>

<div id="nextLevel" style="display:none">
  <h1>ğŸ‰ ParabÃ©ns!</h1>
  <p id="nextMsg"></p>
  <button class="big fr" onclick="startLevel2()">Iniciar nÃ­vel 2</button>
</div>

</div>

<script>
const sounds={
  ok:new Audio("https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"),
  err:new Audio("https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg")
};

let lang="fr",level=1,current=0,score=0,questions=[];

const content={
fr:{voice:"fr-FR",l1:[
"Bonjour","Merci","Au revoir","Sâ€™il vous plaÃ®t","Bonsoir","Excusez-moi",
"Je suis perdu","OÃ¹ est le mÃ©tro ?","Parlez-vous portugais ?","Je comprends",
"Je ne comprends pas","Combien Ã§a coÃ»te ?","Je voudrais de lâ€™eau","Ã€ bientÃ´t",
"Dâ€™accord","Pas de problÃ¨me","Bonne chance","Bienvenue","Bonne nuit",
"OÃ¹ est la salle de bain ?","Câ€™est loin ?","Je cherche un hÃ´tel",
"Ã€ quelle heure ?","Câ€™est bon","Je ne sais pas"
],l2:["Je voudrais rÃ©server une chambre","Pouvez-vous parler plus lentement ?"]},
en:{voice:"en-US",l1:[
"Hello","Thank you","Goodbye","Please","Good evening","Excuse me",
"I am lost","Where is the subway?","Do you speak Portuguese?","I understand",
"I donâ€™t understand","How much does it cost?","I would like some water",
"See you soon","Alright","No problem","Good luck","Welcome","Good night",
"Where is the bathroom?","Is it far?","Iâ€™m looking for a hotel",
"What time is it?","Itâ€™s good","I donâ€™t know"
],l2:["I would like to book a room","Can you speak more slowly?"]}
};

function selectLang(l){
  lang=l;
  level=1;current=0;score=0;
  questions=content[lang].l1;
  document.getElementById("start").style.display="none";
  document.getElementById("game").style.display="block";
  load();
}

function load(){
  document.getElementById("question").innerText=questions[current];
  ["a0","a1","a2"].forEach((id,i)=>{
    document.getElementById(id).innerText=i===0?"Correto":"Errado";
    document.getElementById(id).className="option";
  });
  document.getElementById("score").innerText=score;
  document.getElementById("achievement").innerText=
    score>=15?"ğŸ”¥ Pode avanÃ§ar para o nÃ­vel 2":"";
}

function answer(i){
  const correct=i===0;
  sounds[correct?"ok":"err"].play();
  if(navigator.vibrate) navigator.vibrate(correct?100:300);

  if(correct){score++;document.getElementById("a0").classList.add("correct")}
  else document.getElementById("a"+i).classList.add("wrong");

  setTimeout(()=>{
    current++;
    if(current<questions.length) load();
    else finishLevel();
  },600);
}

function finishLevel(){
  document.getElementById("game").style.display="none";
  document.getElementById("nextLevel").style.display="flex";
  document.getElementById("nextMsg").innerText=
    score>=15?"VocÃª desbloqueou o nÃ­vel 2!":"VocÃª precisa de 15 acertos para avanÃ§ar";
  if(score>=15) confetti();
}

function startLevel2(){
  level=2;current=0;score=0;
  questions=content[lang].l2;
  document.getElementById("nextLevel").style.display="none";
  document.getElementById("game").style.display="block";
  load();
}

function speak(){
  const u=new SpeechSynthesisUtterance(questions[current]);
  u.lang=content[lang].voice;
  speechSynthesis.speak(u);
}

function confetti(){
  for(let i=0;i<80;i++){
    const c=document.createElement("div");
    c.className="confetti";
    c.style.left=Math.random()*100+"%";
    c.style.background=`hsl(${Math.random()*360},100%,50%)`;
    document.body.appendChild(c);
    setTimeout(()=>c.remove(),3000);
  }
}
</script>

</body>
</html>
